<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Falling sand game</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
</head>

<body>
  <canvas width='400' height='300' id='canvas'>
    Your browser does not support canvas - go get Chrome!
  </canvas>

  <script>
  var test;
  $(function() {
    var game = new Game();
    test = game;
  });
  </script>
  <script src="js/game.js"></script>
  <script src="js/draw2d.js"></script>
  <script src="js/spawner.js"></script>
  <script src="js/webgl-utils.js"></script>

  <script id="2d-vertex-shader" type="x-shader/x-vertex">
  precision mediump float;

  attribute vec2 position;
  attribute float aColor;

  uniform mat3 modelViewProjectionMatrix;

  varying vec3 vColor;

  // Credit to 'AHM' on StackOverflow
  vec3 unpackColor(float f) {
      vec3 color;

      color.b = floor(f / (256.0 * 256.0));
      color.g = floor((f - color.b * 256.0 * 256.0) / 256.0);
      color.r = floor(mod(f, 256.0));

      return color / 10.0;
  }

  void main() {
      vColor = unpackColor(aColor);

      gl_Position = vec4(modelViewProjectionMatrix * vec3(position, 1.0), 1.0);
  }
  </script>
  <!-- fragment shader -->
  <script id="2d-fragment-shader" type="x-shader/x-fragment">
  precision mediump float;

  varying vec3 vColor;

  void main() {
      gl_FragColor = vec4(vColor.rgb, 1.0);
  }
  </script>
</body>
</html>
